<!DOCTYPE html>
<html lang="en">
<head>
    <title>SKROT</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" type="text/css" href="./../html/css/base.css" />
    <script src="../libs/ammo/ammo.wasm.js"></script>

    <script type="importmap">
			{
				"imports": {
					"three": "./../libs/three/Three.WebGPU.js",
					"three/webgpu": "./../libs/three/Three.WebGPU.js",
					"three/tsl": "./../libs/three/Three.TSL.js",
					"three/addons/": "./../libs/jsm/"
				}
			}
		</script>

    <script type="module">

        import {Client} from './../client/js/Client.js'
        import {getConfigs, initPipelineAPI} from "./../client/js/application/utils/DataUtils.js";
        import {ThreeAPI} from "./../client/js/3d/three/ThreeAPI.js";
        import {GameScreen} from "./../client/js/application/ui/GameScreen.js";
        import {setRefDiv} from "./../client/js/application/ui/dom/DomUtils.js";

        let loc = window.location.href;
        console.log("location:", window.location.href)
        let place = loc.split('?');
        if (place[0] ===  'http://localhost:5006/') {
            window.islocal = true;
        }


        let client = new Client();

        function indexLoaded(msg) {
            console.log("Configs", msg, getConfigs());
            client.initClient();
        }

        function pipeReady(e) {
            client.loadDataIndex(indexLoaded);
        }

        window.GameScreen = new GameScreen();
        window.GameScreen.registerAppContainer(document.body);
        window.ThreeAPI = new ThreeAPI();

        setRefDiv(document.body);

        initPipelineAPI(pipeReady)


    </script>

</head>

<body id="canvas_window"></body>
</html>
